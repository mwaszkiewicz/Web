angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$scope",function(t){t.$on("login",function(n,o){t.currentUser=o})}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc","$location",function(t,n,o){t.login=function(e,r){n.login(e,r).then(function(n){t.$emit("login",n.data),o.path("/")})}}]);var app=angular.module("app");app.controller("PostsCtrl",["$scope","PostsSvc",function(t,n){t.addPost=function(){t.postBody&&n.create({body:t.postBody}).success(function(n){t.posts.unshift(n),t.postBody=null})},n.fetch().then(function(n){t.posts=n})}]),angular.module("app").service("PostsSvc",["$http",function(t){this.fetch=function(){return t.get("/api/posts")},this.create=function(n){return t.post("/api/posts",n)}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc","$location",function(t,n,o){t.register=function(e,r){n.register(e,r).then(function(n){t.$emit("login",n),o.path("/")})}}]),angular.module("app").config(["$routeProvider",function(t){t.when("/",{controller:"PostsCtrl",templateUrl:"posts.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"login.html"})}]),angular.module("app").service("UserSvc",["$http",function(t){var n=this;n.getUser=function(){return t.get("/api/users").then(function(t){return t.data})},n.login=function(o,e){return t.post("/api/sessions",{username:o,password:e}).then(function(o){return n.token=o.data,t.defaults.headers.common["X-Auth"]=o.data,n.getUser()})},n.register=function(o,e){return t.post("/api/users",{username:o,password:e}).then(function(){return n.login(o,e)})}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwicG9zdHMuY3RybC5qcyIsInBvc3RzLnN2Yy5qcyIsInJlZ2lzdGVyLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJ1c2VyLnN2Yy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRvbiIsIl8iLCJ1c2VyIiwiY3VycmVudFVzZXIiLCJVc2VyU3ZjIiwiJGxvY2F0aW9uIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwidGhlbiIsInJlc3BvbnNlIiwiJGVtaXQiLCJkYXRhIiwicGF0aCIsImFwcCIsIlBvc3RzU3ZjIiwiYWRkUG9zdCIsInBvc3RCb2R5IiwiY3JlYXRlIiwiYm9keSIsInN1Y2Nlc3MiLCJwb3N0IiwicG9zdHMiLCJ1bnNoaWZ0IiwiZmV0Y2giLCJzZXJ2aWNlIiwiJGh0dHAiLCJ0aGlzIiwiZ2V0IiwicmVnaXN0ZXIiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsInN2YyIsImdldFVzZXIiLCJ0b2tlbiIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQVFDLE9BQU8sT0FDWCxZQ0RKRCxRQUFRQyxPQUFPLE9BQ1ZDLFdBQVcsbUJBQUEsU0FBbUIsU0FBU0MsR0FDcENBLEVBQU9DLElBQUksUUFBUyxTQUFTQyxFQUFHQyxHQUM1QkgsRUFBT0ksWUFBY0QsT0NIakNOLFFBQVFDLE9BQU8sT0FDVkMsV0FBVyxhQUFBLFNBQUEsVUFBQSxZQUFhLFNBQVNDLEVBQVFLLEVBQVNDLEdBQy9DTixFQUFPTyxNQUFRLFNBQVNDLEVBQVVDLEdBQzlCSixFQUFRRSxNQUFNQyxFQUFVQyxHQUNuQkMsS0FBSyxTQUFTQyxHQUNYWCxFQUFPWSxNQUFNLFFBQVNELEVBQVNFLE1BQy9CUCxFQUFVUSxLQUFLLFVDTm5DLElBQUlDLEtBQU1sQixRQUFRQyxPQUFPLE1BR3pCaUIsS0FBSWhCLFdBQVcsYUFBQSxTQUFBLFdBQWEsU0FBU0MsRUFBUWdCLEdBRXpDaEIsRUFBT2lCLFFBQVUsV0FFVGpCLEVBQU9rQixVQUNQRixFQUFTRyxRQUNEQyxLQUFNcEIsRUFBT2tCLFdBQ2RHLFFBQVEsU0FBU0MsR0FDaEJ0QixFQUFPdUIsTUFBTUMsUUFBUUYsR0FFckJ0QixFQUFPa0IsU0FBVyxRQU1sQ0YsRUFBU1MsUUFBUWYsS0FBSyxTQUFTYSxHQUMzQnZCLEVBQU91QixNQUFRQSxPQ3BCdkIxQixRQUFRQyxPQUFPLE9BQ2Q0QixRQUFRLFlBQUEsUUFBWSxTQUFTQyxHQUM1QkMsS0FBS0gsTUFBUSxXQUNYLE1BQU9FLEdBQU1FLElBQUksZUFFbkJELEtBQUtULE9BQVMsU0FBU0csR0FDckIsTUFBT0ssR0FBTUwsS0FBSyxhQUFjQSxPQ05wQ3pCLFFBQVFDLE9BQU8sT0FDVkMsV0FBVyxnQkFBQSxTQUFBLFVBQUEsWUFBZ0IsU0FBU0MsRUFBUUssRUFBU0MsR0FDbEROLEVBQU84QixTQUFXLFNBQVN0QixFQUFVQyxHQUNqQ0osRUFBUXlCLFNBQVN0QixFQUFVQyxHQUN0QkMsS0FBSyxTQUFTUCxHQUNYSCxFQUFPWSxNQUFNLFFBQVNULEdBQ3RCRyxFQUFVUSxLQUFLLFdDSm5DakIsUUFBUUMsT0FBTyxPQUNWaUMsUUFBQSxpQkFBTyxTQUFTQyxHQUNiQSxFQUNLQyxLQUFLLEtBQ0ZsQyxXQUFZLFlBQ1ptQyxZQUFhLGVBRWhCRCxLQUFLLGFBQ0ZsQyxXQUFZLGVBQ1ptQyxZQUFhLGtCQUVoQkQsS0FBSyxVQUNGbEMsV0FBWSxZQUNabUMsWUFBYSxrQkNmN0JyQyxRQUFRQyxPQUFPLE9BQ1Y0QixRQUFRLFdBQUEsUUFBVyxTQUFTQyxHQUN6QixHQUFJUSxHQUFNUCxJQUVWTyxHQUFJQyxRQUFVLFdBQ1YsTUFBT1QsR0FBTUUsSUFBSSxjQUNabkIsS0FBSyxTQUFTQyxHQUNYLE1BQU9BLEdBQVNFLFFBSTVCc0IsRUFBSTVCLE1BQVEsU0FBU0MsRUFBVUMsR0FDM0IsTUFBT2tCLEdBQU1MLEtBQUssaUJBQ2RkLFNBQVVBLEVBQ1ZDLFNBQVVBLElBQ1hDLEtBQUssU0FBU0MsR0FHYixNQUZBd0IsR0FBSUUsTUFBUTFCLEVBQVNFLEtBQ3JCYyxFQUFNVyxTQUFTQyxRQUFRQyxPQUFPLFVBQVk3QixFQUFTRSxLQUM1Q3NCLEVBQUlDLGFBSW5CRCxFQUFJTCxTQUFXLFNBQVN0QixFQUFVQyxHQUM5QixNQUFPa0IsR0FBTUwsS0FBSyxjQUNkZCxTQUFVQSxFQUNWQyxTQUFVQSxJQUNYQyxLQUFLLFdBQ0osTUFBT3lCLEdBQUk1QixNQUFNQyxFQUFVQyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xyXG4gICAgJ25nUm91dGUnXHJcbl0pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdBcHBsaWNhdGlvbkN0cmwnLCBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICAgICAkc2NvcGUuJG9uKCdsb2dpbicsIGZ1bmN0aW9uKF8sIHVzZXIpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRVc2VyID0gdXNlcjtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIFVzZXJTdmMsICRsb2NhdGlvbikge1xyXG4gICAgICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKHVzZXJuYW1lLCBwYXNzd29yZCkge1xyXG4gICAgICAgICAgICBVc2VyU3ZjLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZClcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdsb2dpbicsIHJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJylcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuIiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpO1xyXG4vL3V0d29yemVuaWUgbW9kdWx1IFBvc3RzQ3RybFxyXG4vL3dzdHJ6eWtuaWVjaWUgemFsZXpub3NjaSAkc2NvcGVcclxuYXBwLmNvbnRyb2xsZXIoXCJQb3N0c0N0cmxcIiwgZnVuY3Rpb24oJHNjb3BlLCBQb3N0c1N2Yykge1xyXG4gICAgLy93eWtvbmFuaWUgZnVua2NqaSBuYXN0YXBpIHBvIGtsaWtuaWVjaXUgcHJ6eWNpc2t1IERvZGFqIHBvc3QuXHJcbiAgICAkc2NvcGUuYWRkUG9zdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vZG9kYW55IGJlZHppZSBqZWR5bmllIHBvc3QgemF3aWVyYWphY3kgdHJlc2NcclxuICAgICAgICBpZiAoJHNjb3BlLnBvc3RCb2R5KSB7XHJcbiAgICAgICAgICAgIFBvc3RzU3ZjLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keTogJHNjb3BlLnBvc3RCb2R5XHJcbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKHBvc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucG9zdHMudW5zaGlmdChwb3N0KTtcclxuICAgICAgICAgICAgICAgICAgICAvL2N6eXN6Y3plbmllIHphd2FydG9zY2kgcG9sYVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wb3N0Qm9keSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLy91bWllc3pjemVuaWUgbm93ZWdvIHBvc3R1IG5hIHBvY3phdGt1IHRhYmxpY3kgJHNjb3BlLlBvc3RzQ3RybFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvL2RhbmUgcG9jemF0a293ZVxyXG4gICAgUG9zdHNTdmMuZmV0Y2goKS50aGVuKGZ1bmN0aW9uKHBvc3RzKSB7XHJcbiAgICAgICAgJHNjb3BlLnBvc3RzID0gcG9zdHM7XHJcbiAgICB9KTtcclxufSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4uc2VydmljZSgnUG9zdHNTdmMnLCBmdW5jdGlvbigkaHR0cCl7XHJcbiAgdGhpcy5mZXRjaCA9IGZ1bmN0aW9uKCl7XHJcbiAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3Bvc3RzJyk7XHJcbiAgfVxyXG4gIHRoaXMuY3JlYXRlID0gZnVuY3Rpb24ocG9zdCl7XHJcbiAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9wb3N0cycsIHBvc3QpO1xyXG4gIH1cclxufSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgVXNlclN2YywgJGxvY2F0aW9uKSB7XHJcbiAgICAgICAgJHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkKSB7XHJcbiAgICAgICAgICAgIFVzZXJTdmMucmVnaXN0ZXIodXNlcm5hbWUsIHBhc3N3b3JkKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24odXNlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCgnbG9naW4nLCB1c2VyKVxyXG4gICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJylcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuIiwiLy9Sb3V0aW5nIGRlZmluaW93YW5pZSB0cmFzeSBkbGEgc3Ryb25cclxuLy9kZWZpbmljamEgd2lkb2tvdyBvcmF6IG9kcG93aWFkYWphY2UgaW0ga29udHJvbGVyeVxyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcoZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkcm91dGVQcm92aWRlclxyXG4gICAgICAgICAgICAud2hlbignLycsIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQb3N0c0N0cmwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwb3N0cy5odG1sJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbignL3JlZ2lzdGVyJywge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1JlZ2lzdGVyQ3RybCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3JlZ2lzdGVyLmh0bWwnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvbG9naW4nLCB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTG9naW5DdHJsJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbG9naW4uaHRtbCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuc2VydmljZSgnVXNlclN2YycsIGZ1bmN0aW9uKCRodHRwKSB7XHJcbiAgICAgICAgdmFyIHN2YyA9IHRoaXM7XHJcblxyXG4gICAgICAgIHN2Yy5nZXRVc2VyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlcnMnKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc3ZjLmxvZ2luID0gZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Nlc3Npb25zJywge1xyXG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXHJcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHN2Yy50b2tlbiA9IHJlc3BvbnNlLmRhdGFcclxuICAgICAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLUF1dGgnXSA9IHJlc3BvbnNlLmRhdGFcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdmMuZ2V0VXNlcigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzdmMucmVnaXN0ZXIgPSBmdW5jdGlvbih1c2VybmFtZSwgcGFzc3dvcmQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvdXNlcnMnLCB7XHJcbiAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcclxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdmMubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0pO1xyXG4iXX0=
